!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n=document.querySelector("#canvas"),i=n.getContext("2d");function o(e="aqua",t,n,o=40,c=40,s=!0){i.save(),s&&(i.shadowOffsetX=10,i.shadowOffsetY=10,i.shadowColor="#ccc"),i.fillStyle=e,i.fillRect(t,n,o,c),i.restore()}function c(e,t,n,o="20px",c="#fff",s=!0){i.save(),s&&(i.shadowOffsetX=2,i.shadowOffsetY=2,i.shadowColor="#000"),i.fillStyle=c,i.font=o+" 微软雅黑",i.fillText(e,t,n),i.restore()}function s(e,t,n,o){i.clearRect(e,t,n,o)}console.log(i);let r=["👼","🧔","🤴","👶","👦","🧒","👩","👨","🤶","🎅"],a=[1e4,15e3,2e4,25e3],f=["开始游戏","初始资金","选择角色"],l=["1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣"],h=[];function u(e,t,n,i,r,a,f,l){this.name=e,this.index=t,this.money=n,this.state=i,this.stop=r,this.control=a,this.x=f,this.y=l,h.push(this),u.prototype.getDis=function(e){let t,n;100===this.y?50*e+this.x>=650?(t=650,n=50*(e-(650-this.x)/50)+this.y):(t=50*e+this.x,n=100):650===this.x?50*e+this.y>=600?(t=650-50*(e-(600-this.y)/50),n=600):(t=650,n=50*e+this.y):600===this.y?this.x-50*e<=100?(t=100,n=600-50*(e-(this.x-100)/50)):(n=600,t=this.x-50*e):100===this.x&&(this.y-50*e<=100?(t=this.x+50*(e-(this.y-100)/50),n=100):(t=100,n=this.y-50*e)),this.tarX=t,this.tarY=n},u.prototype.move=function(){let e=x.find(e=>e.x===this.x&&e.y===this.y);const{x:t,y:n,color:i,name:r,sojourner:a}=e;s(this.x,this.y,40,40),o(i,this.x,this.y),a?c(a,t,n,"30px","#000",!1):c(r,t+10,n+25,"20px","#000",!1),100===this.y?this.x>=650?(this.x=650,this.y+=50):(this.x+=50,this.y=100):650===this.x?this.y>=600?(this.y=600,this.x-=50):(this.x=650,this.y+=50):600===this.y?this.x<=100?(this.x=100,this.y-=50):(this.y=600,this.x-=50):100===this.x&&(this.y<=100?(this.y=100,this.x+=50):(this.x=100,this.y-=50)),c(this.name,this.x,this.y+30,"30px","#000",!1)},u.prototype.purchase=function(){const e=x.find(e=>e.x===this.x&&e.y===this.y),{price:t,owner:n,state:i}=e;e.owner=this.name,this.money-=t},u.prototype.upgrade=function(){const e=x.find(e=>e.x===this.x&&e.y===this.y),{price:t,owner:n,state:i,cost:o}=e;this.money-=t,e.cost+=t/5}}let x=[],p=[];function w(e,t){this.name=e,this.money=t,this.cost=t/5,p.push(this)}function y(e,t,n,i,o="aqua",c=0,s=0){this.name=e,this.price=t,this.state=n,this.owner=i,this.color=o,this.cost=0,this.x=c,this.y=s,this.sojourner="",x.push(this)}new w("京",990),new w("津",800),new w("冀",130),new w("晋",100),new w("内",300),new w("辽",400),new w("吉",120),new w("黑",310),new w("沪",380),new w("苏",160),new w("浙",320),new w("皖",240),new w("闽",180),new w("豫",150),new w("鄂",280),new w("湘",200),new w("粤",220),new w("桂",240),new w("琼",450),new w("蜀",300),new w("黔",330),new w("云",360),new w("渝",170),new w("藏",110),new w("陕",340),new w("甘",260),new w("青",180),new w("宁",180),new w("新",190),new w("港",580),new w("澳",580),new w("台",580);let m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,2,1,1,1,1,2,1,3,0,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,2,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,2,0,1,0,0,0,0,0,0,0,0,0,0,1,0,3,1,1,1,2,1,1,1,1,2,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0],d=[];function v(e,t,n){this.text=e,this.value=t,this.stop=n,d.push(this)}function E(){if(_){let e=Math.floor(6*Math.random());P=e,l.forEach((t,n)=>{n===e&&c(t,800,300,"30px","aqua")})}}function k(){let e=setInterval(E,50),t=setTimeout((function(){if(clearInterval(e),_){let e=setInterval((function(){h[$].move()}),500);n.removeEventListener("click",L);let t=setTimeout((function(){clearInterval(e),function(){const{x:e,y:t}=h[$],n=x.find(n=>n.x===e&&n.y===t),{owner:i,state:o,name:r,price:a,cost:f}=n;if(1===o)if(""===i){let e;e=!h[$].control||confirm(`是否购买价值 ￥${a} 的 ${r} `),e?(h[$].purchase(),function(){const{name:e,x:t,y:n}=h[$];100===n?c(e,t+5,n-10,"20px","#fff",!1):650===t?c(e,t+50,n+30,"20px","#fff",!1):600===n?c(e,t+5,n+70,"20px","#fff",!1):100===t&&c(e,t-35,n+25,"20px","#fff",!1)}(),q(),T("购买成功","green")):T("购买失败")}else if(i!=h[$].name){h[$].money-=f,h.find(e=>e.name===i).money+=f,q(),T("支付过路费￥"+f)}else i===h[$].name&&(h[$].control?ispurchase=confirm("是否升级当前土地 "):ispurchase=!0,ispurchase?(h[$].upgrade(),function(){let e=x.find(e=>e.x===h[$].x&&e.y===h[$].y);const{x:t,y:n,cost:i,price:o}=e;let r=i/(o/5);100===n?(s(t+25,n-40,10,10),c(r,t+25,n-30,"10px","red",!1)):650===t?(s(t+70,n,10,10),c(r,t+70,n+10,"10px","red",!1)):600===n?(s(t+35,n+50,10,10),c(r,t+35,n+60,"10px","red",!1)):100===t&&(s(t-15,n-5,10,10),c(r,t-15,n+5,"10px","red",!1))}(),q(),T("升级成功","green")):T("升级失败"));else if(2===o){const e=(l=0,u=d.length,Math.floor(Math.random()*(u-l))+l),{text:t,value:n,stop:i}=d[e];h[$].money+=n,h[$].stop=i,q(),T(t)}else 3===o?(h[$].stop=1,T("感觉身体疲惫，需要休息1天")):4===o&&(h[$].money+=1e3,q(),T("恭喜获得￥1000"));var l,u;h[$].money<0&&("🐷"!=h[$].name?(_=0,$=0,alert(`${h[$].name}破产了，游戏结束,很遗憾你没有获胜`)):(_=0,$=0,alert("🐷破产了，游戏结束,恭喜你获胜")))}(),function(){$=0===$?1:0,function(){let{name:e,stop:t}=h[$];if(t)return T(`需要休息${t}天`),h[$].stop-=1,!0}()&&($=0===$?1:0);0===$?(n.addEventListener("click",L),h[$].control||k()):(n.removeEventListener("click",L),k())}(),s(800,320,200,40),c("当前行动者:"+h[$].name,800,340,"20px","#999",!1),clearTimeout(t)}),510*(P+1))}clearTimeout(t)}),2e3)}function L(e){const t=e.clientX,n=e.clientY;t>800&&t<840&&n>270&&n<300&&k()}function b(e){const t=e.clientX,i=e.clientY;t>800&&t<880&&i>380&&i<410&&(h[0].control=!1,s(800,380,80,30),c("取消托管",800,400,"20px","#999",!1),T("开启托管","green"),n.addEventListener("click",g),n.removeEventListener("click",b))}function g(e){const t=e.clientX,i=e.clientY;t>800&&t<880&&i>380&&i<410&&(h[0].control=!0,s(800,380,80,30),c("开启托管",800,400,"20px","#999",!1),T("取消托管"),n.addEventListener("click",b),n.removeEventListener("click",g))}function X(e){const t=e.clientX,i=e.clientY;n.style.cursor=t>800&&t<880&&i>100&&i<120||t>800&&t<880&&i>140&&i<160||t>800&&t<880&&i>180&&i<200||t>800&&t<840&&i>270&&i<300||t>800&&t<880&&i>380&&i<410?"pointer":"default"}function Y(e){const t=e.clientX,n=e.clientY;x.forEach((e,i)=>{const{name:o,price:r,owner:a,cost:f,x:l,y:h}=e;t>l&&t<l+40&&n>h&&n<h+40&&(s(350,330,200,200),c("地名: "+o,350,350,"20px","#999",!1),c("价值: ￥"+r,350,390,"20px","#999",!1),c("地主: "+a,350,430,"20px","#999",!1),c("过路费: ￥"+f,350,470,"20px","#999",!1))})}function O(e){const t=e.clientX,i=e.clientY;t>800&&t<880&&i>100&&i<120?(s(0,0,800,800),_=1,q(),n.removeEventListener("click",O),R(h[0].money),D(h[0].name),x.forEach((e,t)=>{const{name:n,x:i,y:s,color:r}=e;switch(e.state){case 1:o(r,i,s),c(n,i+10,s+25,"20px","#000",!1);break;case 2:o(r,i,s),c(n,i+10,s+25);break;case 3:o(r,i,s),c(n,i+5,s+25);break;case 4:o(r,i,s),c(n,i+10,s+25)}}),h.forEach(e=>{const{name:t,x:n,y:i}=e;s(n,i,50,50),o("#409eff",n,i),c(t,n,i+30,"30px")}),function(){function e(){c("🔻点击开始出发",800,260,"20px","#"+(~~(Math.random()*(1<<24))).toString(16),!1)}e(),I=setInterval(e,2e3),c("6️⃣",800,300,"30px","aqua"),n.addEventListener("click",L)}(),s(800,100,80,22),c("重新开始",800,120,"20px","#999",!1),n.addEventListener("click",j),c("游戏开始了",350,200,"20px","aqua"),c("当前行动者:"+h[$].name,800,340,"20px","#999",!1),c("开启托管",800,400,"20px","#999",!1),n.addEventListener("click",b),n.addEventListener("click",Y)):t>800&&t<880&&i>140&&i<160?(a.forEach((e,t)=>{c(e,700,160+40*t,"20px","red",!1)}),n.addEventListener("click",M)):t>800&&t<880&&i>180&&i<200&&(r.forEach((e,t)=>{c(e,760,100+40*t,"30px","red",!1)}),n.addEventListener("click",S))}function j(e){const t=e.clientX,i=e.clientY;if(t>800&&t<880&&i>100&&i<120){if(!confirm("是否重新开始"))return;C(),n.removeEventListener("click",j),n.removeEventListener("click",Y)}}function M(e){const t=e.clientX,i=e.clientY;a.forEach((e,o)=>{const c=145+40*o;var r;t>700&&t<760&&i>c&&i<c+20&&(r=e,h.forEach(e=>{e.money=r}),s(700,145,60,140),R(r),n.removeEventListener("click",M))})}function S(e){const t=e.clientX,i=e.clientY;r.forEach((e,o)=>{const c=60+40*o;var r;t>760&&t<800&&i>c&&i<c+40&&(r=e,h[0].name=r,s(760,70,40,400),D(r),n.removeEventListener("click",S))})}function T(e="提示信息",t="red"){s(150,0,1200,40),c(h[$].name+e,150,30,"30px",t,!1);let n=setTimeout((function(){s(150,0,1200,40),clearTimeout(n)}),2e3)}function q(){h.forEach((e,t)=>{s(200+300*t,250,100,100),c(e.name,200+300*t,250,"20px","#999"),c("￥"+e.money,200+300*t,280,"20px","#999",!1)})}new v("扶老奶奶过马路的事迹被大家知道了，村委会颁发￥1000奖金",1e3,0),new v("中了彩票，获得头奖￥5000",5e3,0),new v("在街边被劫匪抢劫，为了保住性命，失去￥3000",-3e3,0),new v("喝了一杯一点点，花费￥30",-30,0),new v("路边捡到￥500",500,0),new v("吃鱼卡到鱼刺，去医院花了￥800",-800,0),new v("钱包落在出租车里，丢失￥1000",-1e3,0),new v("空闲时间去兼职家教，收获￥2000",2e3,0),new v("扶老奶奶过马路摔了一跤，买药花了￥100",-100,0),new v("手机突然坏了，换了部最新款iPhone，花费￥1300",-1300,0),new v("吃羊肉火锅，花费￥500",-500,0),new v("去日本看樱花，花费￥2000",-2e3,0),new v("什么也没有发生，除了钱包少了￥800",-800,0),new v("什么也没有发生, 除了钱包多了￥1000",1e3,0),new v("在广交会做翻译，获得￥1000",1e3,0),new v("在校门口发传单，得到￥100",100,0),new v("获得三好学生奖学金，奖金￥3000",3e3,0),new v("抢了个微信红包，获得￥1",1,0),new v("梦见得到￥3000奖金，醒来决定花￥50去拜神",-50,0),new v("获得了￥3000奖金！赶紧花￥500去还愿",2500,0),new v("卖闲置赚了￥100",100,0),new v("什么也没有发生",0,0),new v("看电影花费了￥100",-100,0),new v("还花呗欠款￥999",-999,0),new v("一年一度的双十一到了，剁手花了￥2000",-2e3,0),new v("突然很渴想买瓶矿泉水，花费￥5",-5,0),new v("去工地搬砖赚了￥500",500,0),new v("偷税漏税罚款￥1000，休息1日",-1e3,1),new v("超速行驶被罚款￥2000，休息2天",-2e3,2),new v("被查水表发现有违建，罚款￥1000并休息3日",-1e3,3),new v("考试作弊被休息5日",0,5);let I=0,P=0,_=0,$=0;function C(){_=0,$=0,h=[],new u("👦",0,1e4,1,0,!0,100,100),new u("🐷",1,1e4,1,0,!1,650,600),function(){x=[],m.forEach((e,t)=>{if(e>0){const{x:n,y:i}=function(e){return{x:e%13*50+50,y:50*parseInt(e/13)+50}}(t);switch(e){case 1:new y("name",9e3,1,"","aqua",n,i);break;case 2:new y("❓",1e3,2,"命运","#f56c6c",n,i);break;case 3:new y("💤",4200,3,"酒店","#999",n,i);break;case 4:new y("🚩",2e3,4,"起点","#409eff",n,i)}}});let e=0;x.forEach((t,n)=>{1===t.state&&(t.name=p[e].name,t.price=p[e].money,t.cost=p[e].cost,e++)})}(),s(800,270,100,50),n.removeEventListener("click",L),s(800,380,80,30),n.removeEventListener("click",g),n.removeEventListener("click",b),clearInterval(0),clearInterval(I),s(0,0,n.width,n.height),c("欢迎来到lhx自制的大富翁小游戏",250,100,"20px","#999",!1),c("玩法说明",250,240,"20px","#999",!1),c("◾ 点击色子进行游戏，电脑玩家会自动掷色子",250,280,"20px","#999",!1),c("◾ 游戏目标：直到一方玩家破产",250,320,"20px","#999",!1),c("◾ 每个棋格都会触发对应事件",250,360,"20px","#999",!1),c("◾ 游戏还支持托管，让你解放双手",250,400,"20px","#999",!1),c("◾ 点击棋格可显示详细信息",250,440,"20px","#999",!1),f.forEach((e,t)=>{c(e,800,120+40*t,"20px","aqua",!1)}),n.addEventListener("click",O),n.addEventListener("mousemove",X)}function R(e=1e4){s(800,140,160,25),c("初始资金: "+e,800,160,"20px","#999",!1)}function D(e="👦"){s(800,180,160,25),c("选择角色: "+e,800,200,"20px","#999",!1)}C()}]);